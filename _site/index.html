
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="author" content="Jingbei Li" />
    <title>Homepage</title>

    <link rel="stylesheet" href="/assets/themes/dinky/css/styles.css">
    <link rel="stylesheet" href="/assets/themes/dinky/css/pygment_trac.css">
    <script src="/assets/themes/dinky/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="/">Jingbei Li's Blog</a></h1>
        <p class="header">Welcome!</p>
        <ul>
          
          
          


  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li class="active"><a href="/index.html" class="active">Homepage</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Categories</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/timeline.html">Timeline</a></li>
      	
      
    
  



	  <li><a href="/about.html" rel="me">About me</a></li>
        </ul>
	<!--<h4>Quick Links</h4>
        <ul>
	  <li><a href="/index.html#recent-posts" rel="me">Recent Posts</a></li>
	  <li><a href="/index.html#github-activity" rel="me">Github Activity</a></li>
	  <li><a href="/index.html#recent-comments" rel="me">Recent Comments</a></li>
        </ul>-->
        <ul>
	  <li><a href="/links.html">Other links</a></li>
        </ul>
        <ul>
	  <li><a href="/rss.xml">RSS</a>/<a href="/atom.xml">Atom</a></li>
        </ul>
        
        
        <div class="misc vcard">
	  <!--<h4>About</h4>-->
          <ul>
            
            <!--<li class="contact"><address><span class="author fn n">Jingbei Li</span> - <span class="fn email">jingbei.li@yahoo.com</span></address></li>-->
            
            
            <!--<li class="github"><a href="http://github.com/petronny/" rel="me">github.com/petronny</a></li>-->
            
            
            <!--<li class="twitter"><a href="http://twitter.com/jingbei_li/" rel="me">twitter.com/jingbei_li</a></li>-->
            
            
            
            
            
          </ul>
        </div><!-- misc -->
        
      </header>

      <section>
      
<section>
  <h1>Homepage</h1>

  
<h1 id="section">定场诗一首</h1>

<pre><code>世人笑我太疯癫，我笑别人看不穿。
不见五陵豪杰墓，无花无酒锄作田。
</code></pre>

<p><a id="recent-posts"></a></p>

<h1 id="recent-posts">Recent Posts</h1>

<ul class="posts">
	
		<div class="post">
			<h2><a href="/2015/08/26/enable-ipv6-nat-in-openwrt">Openwrt 15.05rc1 HG255D的ipv6支持</a></h2>
			<h4>26 Aug 2015</h4>
			<p>
<p>感谢<a href="blog.rjjacky.info">rjjacky</a>把他的HG255D转手给我折腾openwrt了。这次折腾的主要目标是ipv6支持。</p>

<h3 id="section">首先是蛋疼的固件</h3>

<p>openwrt对hg255d的支持至少我从15.05rc2就已经看不到了。。我先尝试自己编译一个。</p>

<p>openwrt自己的wiki上的编译guide就好几种。。根本不知道是哪个，并且除了<code>make menuconfig</code>以外还有很多隐藏的地方要改。
经过几次编译，没有一次flash进去能用的。。。放弃。。</p>

<p>后来从<a href="http://www.right.com.cn/Forum/thread-167159-1-1.html">此处</a>下载了一个15.05-rc1带部分ipv6的固件，总算刷进去了。</p>

<p>这个固件还算不错，wan和wan6直接就获取到ipv6地址了，lan内部能获取到一个由dhcpv6分配的有奇怪prefix的ipv6地址。</p>

<p>不过没有意义，lan内的机器还是访问不了ipv6的外网。</p>

<p>于是，我的第一反应：</p>

<h3 id="ipv6nat">做个ipv6的nat</h3>

<h4 id="part1">part1</h4>

<p>参见<a href="http://www.7forz.com/2555/">这篇blog</a></p>

<ul>
  <li>opkg装kmod-ip6tables，kmod-ipt-nat6。</li>
</ul>

<blockquote>
  <p>装的时候的小插曲：源里面有个链接失效了，注释掉吧先。。</p>
</blockquote>

<ul>
  <li>然后运行 <code>ip6tables -t nat -L</code> 检测一下。</li>
</ul>

<p>不过他之后这句</p>

<blockquote>
  <p>在开机启动脚本上添加ifconfig br-lan xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx/64</p>
</blockquote>

<p>看起来有点不雅。。</p>

<h4 id="part2">part2</h4>

<p>于是我想到了之前看到的知乎上的<a href="http://www.zhihu.com/question/29667477/answer/47149165">这个问题</a>的第一个回答，可以把wan获取到的ipv6地址弄到lan上去。</p>

<p>所以下一步的配置是</p>

<ul>
  <li>在LuCI界面删除LAN-ipv6配置下的Global ULA-Prefix里面的数值</li>
  <li>修改/etc/config/dhcp的对应片段如下，请用脑子改</li>
</ul>

<div class="highlight"><pre><code class="language-sh" data-lang="sh">config dhcp <span class="s1">&#39;lan&#39;</span>
	option interface <span class="s1">&#39;lan&#39;</span>
	option start <span class="s1">&#39;100&#39;</span>
	option limit <span class="s1">&#39;150&#39;</span>
	option leasetime <span class="s1">&#39;12h&#39;</span>
	option ra <span class="s1">&#39;hybrid&#39;</span>
	option dhcpv6 <span class="s1">&#39;hybrid&#39;</span>
	option ndp <span class="s1">&#39;hybrid&#39;</span>
	option ra_management <span class="s1">&#39;1&#39;</span>
config dhcp <span class="s1">&#39;wan6&#39;</span>
	option interface <span class="s1">&#39;wan&#39;</span>
	option dhcpv6 <span class="s1">&#39;hybrid&#39;</span>
	option ra <span class="s1">&#39;hybrid&#39;</span>
	option ndp <span class="s1">&#39;hybrid&#39;</span>
	option master <span class="s1">&#39;1&#39;</span></code></pre></div>

<ul>
  <li>确保odhcpd是处于开机启动状态</li>
</ul>

<blockquote>
  <p>如果现在重启，正常的情况应该是，LAN会获得wan处的ipv6地址（同为2001开头），然后LAN下面的设备各自获得自己的ipv6地址。
这样连radvd也不用管了～</p>
</blockquote>

<h4 id="part3">part3</h4>

<p>好现在回到part1的那篇blog，做最后一步：</p>

<ul>
  <li>在 /etc/firewall.user 中加入</li>
</ul>

<p><code>
ip6tables -t nat -I POSTROUTING -s xxxx:xxxx:xxxx:xxxx::/64 -j MASQUERADE  #其中的IP是LAN的前4段
</code></p>

<ul>
  <li>Reboot and enjoy～</li>
</ul>
</p>
			<button class="btn"><a href="/2015/08/26/enable-ipv6-nat-in-openwrt">Read more</a></button>
		</div>
	
		<div class="post">
			<h2><a href="/2015/07/30/">《星杯传说 破晓》的人物技能平衡调整</a></h2>
			<h4>30 Jul 2015</h4>
			<p>
<p>《星杯传说 破晓》原版的人物平衡性就有所欠缺，在扩展包《龙族复兴》加入以后这一点就变得更为突出。
为了让这个游戏还能玩，我个人对其中的人物技能做了下述调整。</p>

<ul>
  <li>被增强的角色：游侠 占星家 皇家侍卫 血天使 暗之王女</li>
  <li>
    <p>被削弱的角色：星纹师 龙之契约者 真龙女王
<!--* 无调整的角色：天马骑士 圣堂刺客 炼金术士 咒术师 驱魔者 龙骑统帅 风暴执政官 剑舞者 大地武士 龙语者 幽魂法师 霜雪公主 裁决者 心灵塑师 战歌祭司--></p>
  </li>
  <li>进一步的调整打算：
    <ul>
      <li>buff list: 圣堂刺客 血天使 驱魔者</li>
      <li>nerf list: 龙语者 裁决者</li>
    </ul>
  </li>
</ul>

<h3 id="section">被增强的角色</h3>

<ul>
  <li>游侠
    <ul>
      <li>【追风刺】：你的风神斩就是黯灭。</li>
    </ul>
  </li>
  <li>占星家
    <ul>
      <li>增加效果：如果你的所有预兆牌都是风神斩和地裂斩，则增加一张预兆牌，可多次发动。</li>
    </ul>
  </li>
  <li>皇家侍卫
    <ul>
      <li>【神圣护卫】：【当本方角色受到伤害并导致X点士气下降后发动】你分配X点治疗。</li>
    </ul>
  </li>
  <li>血天使
    <ul>
      <li>【炼雷地狱】：【弃总计2张的雷系或地系牌】对一名对手造成2点法术伤害。</li>
    </ul>
  </li>
  <li>暗之王女
    <ul>
      <li>增加效果：任何时候你都可以用黯灭应战。</li>
      <li>【镇魂曲】：【攻击命中，伤害结算后发动，弃X张法术牌】对本次攻击的对手和自己各造成额外X点法术伤害。</li>
    </ul>
  </li>
</ul>

<h3 id="section-1">被削弱的角色</h3>

<ul>
  <li>星纹师
    <ul>
      <li>【命运雕刻】：指定一名不少于2张手牌的队友给你2张牌，之后将手中的2张牌交给任意一名队友，我方战绩区+1宝石。</li>
    </ul>
  </li>
  <li>龙之契约者
    <ul>
      <li>【巨龙之力】：你的主动攻击伤害等于你当前手牌数量。</li>
    </ul>
  </li>
  <li>真龙女王
    <ul>
      <li>移除【龙魂守护】</li>
      <li>【真龙觉醒】：满足以下条件时，翻转任意1张“禁制”牌，在你的回合结束时，强制重新翻回所有“禁制”牌。
        <ul>
          <li>我方因收到伤害导致士气下降时</li>
          <li>场上有星杯合成时</li>
        </ul>
      </li>
      <li>增加效果：你只能按照【龙神恩惠】【龙王神力】【百万龙炎】【圣龙威压】的顺序翻开及移除禁制。</li>
      <li>增加效果：每发动一次【龙族复兴】，【龙族复兴】所需的宝石数量+1。</li>
      <li>【龙王神力】：【攻击命中后弃X(X&gt;1)张异系牌】本次伤害额外+X，“龙脉束缚”存在时不能发动该技能</li>
      <li>【百万龙炎】：【弃X(X&gt;1)张同系牌】对自己和任一对手各造成X点法术伤害，“龙狂迷锁”存在时不能发动该技能。</li>
    </ul>
  </li>
</ul>
</p>
			<button class="btn"><a href="/2015/07/30/">Read more</a></button>
		</div>
	
		<div class="post">
			<h2><a href="/2015/02/02/the-httpdini-redirect-rules-for-yourls">The httpd.ini redirect rules for YOURLS</a></h2>
			<h4>02 Feb 2015</h4>
			<p>
<p>The <code>.htaccess</code> for <a href="http://yourls.org/">YOURLS</a> will not work on Windows servers.
Although YOURLS has noticed that and will create <code>web.config</code> automatically on Windows, my first url shortener site, <a href="http://url.jingbei.li/">url.jingbei.li</a> still cannot redirect links as my expect.</p>

<p>The reason is the Windows server I used is an old IIS server not a IIS7 server, the rewrite rules file should be <code>httpd.ini</code>, not <code>web.config</code>.</p>

<p>And <code>REQUEST_FILENAME</code> does not check the local files because it is relative. The current solution is writing all the file names and directory name manually to <code>httpd.ini</code>. It is a little silly, but works.</p>

<div class="highlight"><pre><code class="language-dosini" data-lang="dosini"><span class="k">[ISAPI_Rewrite]</span>
<span class="err">RewriteRule</span> <span class="err">/admin(.*)</span> <span class="err">/admin$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/css(.*)</span> <span class="err">/css$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/images(.*)</span> <span class="err">/images$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/includes(.*)</span> <span class="err">/includes$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/js(.*)</span> <span class="err">/js$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/pages(.*)</span> <span class="err">/pages$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/user(.*)</span> <span class="err">/user$1</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/(.*).html</span> <span class="err">/$1.html</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/(.*).php</span> <span class="err">/$1.php</span> <span class="k">[L]</span>
<span class="err">RewriteRule</span> <span class="err">/.+</span> <span class="err">/yourls-loader.php</span> <span class="k">[L]</span></code></pre></div>

<h4 id="ps">PS</h4>

<p>I’ve also resigned another domain, <a href="http://pturl.tk/">pturl.tk</a>. It does the same things that url.jingbei.li does, but much shorter. :)</p>
</p>
			<button class="btn"><a href="/2015/02/02/the-httpdini-redirect-rules-for-yourls">Read more</a></button>
		</div>
	
</ul>

<!--Github Activity-->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/octicons/2.0.2/octicons.min.css" />

<link rel="stylesheet" href="//7sbplw.com1.z0.glb.clouddn.com/github-activity-0.1.0.min.css" />

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.2/mustache.min.js"></script>

<script type="text/javascript" src="//7sbplw.com1.z0.glb.clouddn.com/github-activity-0.1.0.min.js"></script>

<h1 id="recent-activity-on-github">Recent Activity on Github</h1>

<div id="feed"></div>

<script>
GitHubActivity.feed({
	username: "petronny",
	selector: "#feed",
	limit: 10 // optional
});
</script>

<p><a id="recent-comments"></a></p>

<h1 id="recent-comments">Recent Comments</h1>


  


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'jingbei'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</section>


      </section>

      <footer>
	<script src="//static.getclicky.com/js" type="text/javascript"></script>
	<script type="text/javascript">try{ clicky.init(100811122); }catch(e){}</script>
	<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100811122ns.gif" /></p></noscript>
	<style type="text/css"> 
		#outerdiv 
		{ 
			width:150px; 
			height:145px; 
			overflow:hidden; 
			position:relative; 
		} 
		#inneriframe 
		{ 
			position:absolute; 
			top:-24px; 
			left:-5px; 
			width:150; 
			height:170; 
		} 
	</style> 
	<div id='outerdiv'> 
		<iframe id='inneriframe' frameborder=0 scrolling=no width=160 height=170 src='//widgets.clicky.com/tally/iframe?site_id=100811122&sitekey=f1e4ee97d7209bdfe74c0ce79738c86c&hide_title=1&hide_branding=1&'></iframe>
	</div>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>

